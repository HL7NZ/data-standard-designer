{
  "resourceType": "Bundle",
  "id": "exampleBundle",
  "type": "transaction",
  "entry": [
    {
      "resource": {
        "resourceType": "Patient",
        "id": "examplePatient",
        "text": {
          "status": "additional",
          "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">John Doe</div>"
        },
        "name": [
          {
            "family": "Doe",
            "given": [
              "John"
            ],
            "text": "John Doe"
          }
        ],
        "birthDate": "1988-01-01",
        "gender": "male",
        "extension": [
          {
            "url": "http://hl7.org.nz/fhir/StructureDefinition/nz-ethnicity",
            "valueCodeableConcept": {
              "coding": [
                {
                  "code": "21111",
                  "system": "https://standards.digital.health.nz/ns/ethnic-group-level-4-code",
                  "display": "Maori"
                }
              ]
            }
          }
        ],
        "identifier": [
          {
            "system": "https://standards.digital.health.nz/ns/nhi-id",
            "value": "ABC1234"
          }
        ]
      },
      "request": {
        "method": "POST",
        "url": "Patient",
        "ifNoneExist": "identifier=https://standards.digital.health.nz/ns/nhi-id|ABC1234"
      }
    },
    {
      "resource": {
        "resourceType": "Practitioner",
        "id": "author1",
        "text": {
          "status": "additional",
          "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">Marcus Welby</div>"
        },
        "name": [
          {
            "family": "Welby",
            "given": [
              "Marcus"
            ],
            "text": "Marcus Welby"
          }
        ],
        "identifier": [
          {
            "system": "https://standards.digital.health.nz/ns/hpi-person-id",
            "value": "xxxx"
          }
        ]
      },
      "request": {
        "method": "POST",
        "url": "Practitioner",
        "ifNoneExist": "identifier=https://standards.digital.health.nz/ns/hpi-person-id|xxxx"
      }
    },
    {
      "resource": {
        "resourceType": "ServiceRequest",
        "id": "sr1",
        "text": {
          "status": "additional",
          "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">Request for biopsy</div>"
        },
        "identifier": [
          {
            "system": "http://example.org/system",
            "value": "yyyy"
          }
        ],
        "status": "active",
        "intent": "order",
        "authoredOn": "2020-11-12",
        "subject": {
          "reference": "Patient/examplePatient"
        },
        "requester": {
          "reference": "Practitioner/author1"
        },
        "specimen": [
          {
            "reference": "Specimen/specimen1"
          }
        ]
      },
      "request": {
        "method": "POST",
        "url": "ServiceRequest"
      }
    },
    {
      "resource": {
        "resourceType": "Observation",
        "id": "exampleSmoker",
        "text": {
          "status": "additional",
          "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">Is a current smoker</div>"
        },
        "status": "final",
        "code": {
          "coding": [
            {
              "code": "72166-2",
              "system": "http://loinc.org"
            }
          ]
        },
        "subject": {
          "reference": "Patient/examplePatient"
        },
        "effectiveDateTime": "2020-11-12",
        "performer": [
          {
            "reference": "Practitioner/author1"
          }
        ]
      },
      "request": {
        "method": "POST",
        "url": "Observation"
      }
    },
    {
      "resource": {
        "resourceType": "Procedure",
        "id": "biopsy1",
        "text": {
          "status": "additional",
          "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">Lung biopsy</div>"
        },
        "status": "completed",
        "subject": {
          "reference": "Patient/examplePatient"
        },
        "performedDateTime": "2020-11-12",
        "code": {
          "coding": [
            {
              "code": "unknown",
              "system": "http:/example.org"
            }
          ]
        },
        "bodySite": [
          {
            "coding": [
              {
                "code": "rul",
                "system": "http://clinfhir.com/CodeSystem/site"
              }
            ]
          }
        ],
        "performer": [
          {
            "actor": {
              "reference": "Practitioner/author1"
            }
          }
        ]
      },
      "request": {
        "method": "POST",
        "url": "Procedure"
      }
    },
    {
      "resource": {
        "resourceType": "Specimen",
        "id": "specimen1",
        "text": {
          "status": "additional",
          "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">Lung biopsy tissue</div>"
        },
        "extension": [
          {
            "url": "http://example.org/return-specimen",
            "valueBoolean": true
          }
        ],
        "status": "available",
        "subject": {
          "reference": "Patient/examplePatient"
        },
        "type": {
          "coding": [
            {
              "code": "TISS",
              "system": "http://terminology.hl7.org/CodeSystem/v2-0487"
            }
          ]
        },
        "collection": {
          "collector": {
            "reference": "Practitioner/author1"
          },
          "bodySite": {
            "coding": [
              {
                "code": "rul",
                "system": "http://clinfhir.com/CodeSystem/site"
              }
            ]
          },
          "method": {
            "coding": [
              {
                "code": "129314006",
                "system": "http://www.snomed.org/",
                "display": "Biopsy - action"
              }
            ]
          }
        },
        "container": [
          {
            "description": "Lung tissue"
          }
        ]
      },
      "request": {
        "method": "POST",
        "url": "Specimen"
      }
    }
  ]
}
